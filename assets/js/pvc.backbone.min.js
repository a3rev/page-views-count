jQuery(function(a){var t=void 0!==pvc_vars.ajax_load_type&&"admin_ajax"==pvc_vars.ajax_load_type?pvc_vars.ajax_url:pvc_vars.rest_api_url;pvc={apps:{},models:{},collections:{},views:{}},_.templateSettings={evaluate:/[<{][%{](.+?)[%}][}>]/g,interpolate:/[<{][%{]=(.+?)[%}][}>]/g,escape:/[<{][%{]-(.+?)[%}][}>]/g},pvc.models.State=Backbone.Model.extend({defaults:{post_id:0,total_view:1,today_view:1}}),pvc.collections.Stats=Backbone.Collection.extend({model:pvc.models.State,url:t}),pvc.views.State=Backbone.View.extend({model:pvc.models.State,tagName:"span",template:_.template(a("#pvc-stats-view-template").html()),initialize:function(){},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}}),pvc.views.AppView=Backbone.View.extend({initialize:function(){this.listenTo(this.collection,"add",this.addOne)},addOne:function(e){e=new pvc.views.State({model:e});this.$el.html(e.render().el)}}),pvc.apps.app={initialize:function(e){this.call_url=t,view_pvc_ids=[],increase_pvc_ids=[],a.each(e,function(e,t){(t.ask_update?increase_pvc_ids:view_pvc_ids).push(t.post_id)}),increase_pvc_ids.length&&(action=void 0!==pvc_vars.ajax_load_type&&"admin_ajax"==pvc_vars.ajax_load_type?"?action=pvc_increase&security="+pvc_vars.security+"&ids=":"/increase/",a.get(this.call_url+action+increase_pvc_ids.join(","),function(e){e.success&&a.each(e.items,function(e,t){collection=new pvc.collections.Stats,new pvc.views.AppView({collection:collection,el:a("#pvc_stats_"+e)}),collection.add(t)})})),view_pvc_ids.length&&(action=void 0!==pvc_vars.ajax_load_type&&"admin_ajax"==pvc_vars.ajax_load_type?"?action=pvc_view&security="+pvc_vars.security+"&ids=":"/view/",a.get(this.call_url+action+view_pvc_ids.join(","),function(e){e.success&&a.each(e.items,function(e,t){collection=new pvc.collections.Stats,new pvc.views.AppView({collection:collection,el:a("#pvc_stats_"+e)}),collection.add(t)})}))}}}),jQuery(document).ready(function(e){var t;e(".pvc_stats").length&&(t={},e(".pvc_stats").each(function(){post_id=e(this).data("element-id"),update_status=e(this).hasClass("pvc_load_by_ajax_update"),t[post_id]={post_id:post_id,ask_update:update_status}}),pvc.apps.app.initialize(t))});